<div class="row">
  <div class="col-lg-12">
    <div class="panel panel-default">
      <div class="panel-heading panel-action-inline">
        <span>Alimentador: <b>{{model.nickname}}</b></span>
        <span class="actions-inline">
          {{#link-to 'reload' model.id class="btn reload btn-primary"}}Registrar Recarga{{/link-to}}
          {{feeder-level nivel=model.nivel}}
          <button {{action 'sendSettings' model}} class="btn reload btn-secondary">Enviar Configuração</button>
        </span>

      </div>
      <div class="panel-body">
        <div class="row">
          <div class="col-lg-6">
            <div class="form-group">
              <label>Identificador na rede:</label> {{model.networkCode}}
            </div>
            <div class="form-group">
              <label>Tanque:</label>
              {{#link-to 'tank.show' model.tank}}{{model.tank.name}}{{/link-to}}
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="row">
  <div class="col-lg-12">
    <div class="panel panel-default">
      <div class="panel-heading panel-action-inline">
        <span>Sensores do Alimentador</span>
      </div>
      <div class="panel-body">
        <div class="row">
          <div class="col-lg-12">

            <ul class="nav nav-tabs">
              {{#each model.sensors as |sensor index|}}
                <li class="">
                  <a data-toggle="tab" href="#sensor-{{index}}">{{sensor.name}}</a>
                </li>
              {{/each}}
            </ul>

            <div class="tab-content">
              {{#each model.sensors as |sensor index|}}
                <div id="sensor-{{index}}" class="tab-pane fade">
                  <div class="row">
                    <div class="col-lg-12">
                      <h3>{{sensor.name}} - ({{sensor.scale}})</h3>
                      <p>{{sensor.description}}</p>

                      <p>
                        {{#link-to 'sensor.show' sensor}}
                          Ver mais informações sobre {{sensor.name}}
                        {{/link-to}}
                      </p>
                    </div>
                  </div>

                  <div class="row">
                    <div class="col-lg-12">
                      {{sensor-chart targetID=sensor.id title='Gráfico do sensor'}}
                    </div>
                  </div>
                </div>
              {{/each}}
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="row">
  <div class="col-lg-12">
    <div class="panel panel-default">
      <div class="panel-heading panel-action-inline">
        Histórico de consumo do alimentador
      </div>
      <div class="panel-body" style="padding: 0 15px;">
        <div class="row">
          <div class="table-responsive">
              <table class="table table-striped table-bordered table-hover" style="margin: 0">
                  <thead>
                      <tr>
                          <th>Data</th>
                          <th>Quantidade</th>
                          <th>Ração</th>
                          <th>Lote</th>
                          <th>Valor da dose</th>
                      </tr>
                  </thead>
                  <tbody>
                    {{#each model.consumptions as |consumption|}}
                      <tr>
                          <td>{{moment-format consumption.createdAt 'DD/MM/YYYY - HH:mm' allowEmpty=true}}</td>
                          <td>{{format-number consumption.quantity}} Kg</td>
                          <td>
                            <a {{action 'showFood' consumption.lot.food.id}}>
                                {{consumption.lot.food.name}}
                            </a>
                          </td>
                          <td>
                            <a {{action 'showLot' consumption.lot.id}}>
                              {{consumption.lot.id}}
                            </a>
                          </td>
                          <td>{{format-money consumption.doseValue}}</td>
                      </tr>
                    {{/each}}
                  </tbody>
              </table>
          </div>

        </div>
      </div>
    </div>
  </div>
</div>
